<div class="landing-container">
  <header class="landing-header">
      <a routerLink="/" class="landing-logo">
        <i class="material-symbols-outlined">delivery_truck_speed</i>SpeedLog
      </a>
      <button class="btn btn-primary" routerLink="/login">
          Acesso ao Sistema
      </button>
  </header>

  <section class="landing-hero">
      <h1 class="hero-title">Conectando encomendas aos seus destinos</h1>
      <p class="hero-subtitle">
        Tecnologia inteligente para acompanhar cada etapa do caminho. 
        Segurança para quem envia e tranquilidade para quem recebe.
      </p>
      <div class="tracking-card">
        
        <div class="tracking-inputs-column">
          
          <div class="form-group-landing">
            <label for="trackCode">Código de Rastreio</label>
            <input type="text" 
                   id="trackCode"
                   [(ngModel)]="trackingCode" 
                   class="tracking-input full-width" 
                   placeholder="Digite o código (Ex: SPD-123456 ou MKT-999)"
                   (keyup.enter)="onTrack()">
          </div>

          <div class="form-group-landing">
            <label for="mathInput">
              <i class="material-symbols-outlined icon-tiny">lock</i> 
             <p> Verificação de segurança: Quanto é <strong>{{ mathChallenge }}</strong></p>
            </label>
            <input type="number" 
                   id="mathInput"
                   [(ngModel)]="userMathInput" 
                   class="tracking-input full-width" 
                   placeholder="Digite a resposta"
                   (keyup.enter)="onTrack()">
          </div>
          
          <button class="tracking-button full-width" (click)="onTrack()" [disabled]="isLoading">
            <span *ngIf="!isLoading">Rastrear Agora</span>
            <span *ngIf="isLoading">Localizando...</span>
          </button>
        </div>

        <div *ngIf="errorMessage" class="tracking-error">
          <i class="material-symbols-outlined">error</i> {{ errorMessage }}
        </div>

      </div>

      <div class="result-container" *ngIf="trackingResult">
        <div class="result-header">
          <div class="header-texts">
            <h3>Status da Entrega: {{ trackingResult.trackingCode }}</h3>
            
            <p class="partner-info" *ngIf="trackingResult.partnerCode">
              Código original ({{ trackingResult.partnerName }}): {{ trackingResult.partnerCode }}
            </p>
          </div>
          <span class="status-badge" [ngClass]="trackingResult.currentStatus | statusClass">
              {{ trackingResult.currentStatus | statusName }}
          </span>
        </div>

        <div class="history-timeline">
           <div class="timeline-item" *ngFor="let event of trackingResult.history.slice().reverse()">
              <div class="timeline-date">{{ event.actionDate | date:'dd/MM/yyyy HH:mm' }}</div>
              <div class="timeline-content">
                <strong>{{ event.actionType }}</strong>
                <p *ngIf="event.notes">{{ event.notes }}</p> <!-- {{ event.statusSnapshot | statusName }} -->
                <div *ngIf="event.statusSnapshot" class="timeline-status" [ngClass]="event.statusSnapshot | statusClass">
                  {{ event.statusSnapshot | statusName }}
                </div>
              </div>
           </div>
        </div>
      </div>

  </section>

  <footer class="landing-footer">
      <div class="footer-content">
          <p>SpeedLog Logística Ltda. - CNPJ: 12.345.678/0001-99</p>
      </div>
  </footer>
</div>